{"version":3,"sources":["webpack:///game2048.js","webpack:///./Examples/2048/Game2048.js","webpack:///./Examples/2048/GameBoard.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","getPageXY","event","Platform","OS","touch","nativeEvent","changedTouches","pageX","pageY","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","React","AppRegistry","StyleSheet","Text","View","Animated","TouchableBounce","GameBoard","BOARD_PADDING","CELL_MARGIN","CELL_SIZE","Cell","_React$Component","this","getPrototypeOf","apply","arguments","createElement","style","styles","cell","Component","Board","_React$Component2","board","row","children","Tile","_React$Component3","_this3","tile","state","opacity","Value","top","_getPosition","toRow","left","toColumn","index","offset","isNew","timing","duration","toValue","start","parallel","tileStyles","calculateOffset","textStyles","whiteText","threeDigits","fourDigits","GameEndOverlay","_React$Component4","hasWon","hasLost","message","overlay","overlayMessage","onPress","onRestart","tryAgain","tryAgainText","Game2048","_React$Component5","_this5","startX","startY","setState","deltaX","deltaY","direction","Math","abs","move","_this6","tiles","filter","map","ref","id","container","onTouchStart","handleTouchStart","onTouchEnd","handleTouchEnd","restartGame","flex","justifyContent","alignItems","padding","backgroundColor","borderRadius","position","bottom","right","flexDirection","fontSize","marginBottom","color","fontWeight","width","height","margin","fontFamily","tile2","tile4","tile8","tile16","tile32","tile64","tile128","tile256","tile512","tile1024","tile2048","registerComponent","app","document","body","appendChild","runApplication","rootTag","445","rotateLeft","matrix","rows","columns","res","push","column","oldRow","oldColumn","markForDeletion","mergedInto","moveTo","hasMoved","fromRow","fromColumn","cells","size","addTile","addRandomTile","setPositions","won","moveLeft","hasChanged","currentRow","resultRow","targetTile","shift","tile1","forEach","rowIndex","columnIndex","fourProbability","emptyCells","r","c","floor","random","newValue","clearOldTiles","canMove","dir","newRow","newColumn"],"mappings":"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","file":"game2048.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}\n\t\n\tvar React=__webpack_require__(1);var\n\t\n\tAppRegistry=\n\t\n\t\n\t\n\t\n\t\n\t\n\tReact.AppRegistry;var StyleSheet=React.StyleSheet;var Text=React.Text;var View=React.View;var Platform=React.Platform;var Animated=React.Animated;var TouchableBounce=React.TouchableBounce;\n\t\n\tfunction getPageXY(event){\n\tif(Platform.OS=='web'){\n\tvar touch=event.nativeEvent.changedTouches[0];\n\treturn{\n\tpageX:touch.pageX,\n\tpageY:touch.pageY};\n\t\n\t}else{\n\treturn{\n\tpageX:event.nativeEvent.pageX,\n\tpageY:event.nativeEvent.pageY};\n\t\n\t}\n\t}\n\t\n\tvar GameBoard=__webpack_require__(445);\n\t\n\tvar BOARD_PADDING=3;\n\tvar CELL_MARGIN=4;\n\tvar CELL_SIZE=60;var\n\t\n\tCell=function(_React$Component){_inherits(Cell,_React$Component);function Cell(){_classCallCheck(this,Cell);return _possibleConstructorReturn(this,(Cell.__proto__||Object.getPrototypeOf(Cell)).apply(this,arguments));}_createClass(Cell,[{key:'render',value:function render()\n\t{\n\treturn React.createElement(View,{style:styles.cell});\n\t}}]);return Cell;}(React.Component);var\n\t\n\t\n\tBoard=function(_React$Component2){_inherits(Board,_React$Component2);function Board(){_classCallCheck(this,Board);return _possibleConstructorReturn(this,(Board.__proto__||Object.getPrototypeOf(Board)).apply(this,arguments));}_createClass(Board,[{key:'render',value:function render()\n\t{\n\treturn(\n\tReact.createElement(View,{style:styles.board},\n\tReact.createElement(View,{style:styles.row},React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null)),\n\tReact.createElement(View,{style:styles.row},React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null)),\n\tReact.createElement(View,{style:styles.row},React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null)),\n\tReact.createElement(View,{style:styles.row},React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null),React.createElement(Cell,null)),\n\tthis.props.children));\n\t\n\t\n\t}}]);return Board;}(React.Component);var\n\t\n\t\n\tTile=function(_React$Component3){_inherits(Tile,_React$Component3);_createClass(Tile,null,[{key:'_getPosition',value:function _getPosition(\n\tindex){\n\treturn BOARD_PADDING+(index*(CELL_SIZE+CELL_MARGIN*2)+CELL_MARGIN);\n\t}}]);\n\t\n\tfunction Tile(props){_classCallCheck(this,Tile);var _this3=_possibleConstructorReturn(this,(Tile.__proto__||Object.getPrototypeOf(Tile)).call(this,\n\tprops));\n\t\n\tvar tile=_this3.props.tile;\n\t\n\t_this3.state={\n\topacity:new Animated.Value(0),\n\ttop:new Animated.Value(Tile._getPosition(tile.toRow())),\n\tleft:new Animated.Value(Tile._getPosition(tile.toColumn()))};return _this3;\n\t\n\t}_createClass(Tile,[{key:'calculateOffset',value:function calculateOffset()\n\t\n\t{\n\tvar tile=this.props.tile;\n\t\n\tvar offset={\n\ttop:this.state.top,\n\tleft:this.state.left,\n\topacity:this.state.opacity};\n\t\n\t\n\tif(tile.isNew()){\n\tAnimated.timing(this.state.opacity,{\n\tduration:100,\n\ttoValue:1}).\n\tstart();\n\t}else{\n\tAnimated.parallel([\n\tAnimated.timing(offset.top,{\n\tduration:100,\n\ttoValue:Tile._getPosition(tile.toRow())}),\n\t\n\tAnimated.timing(offset.left,{\n\tduration:100,\n\ttoValue:Tile._getPosition(tile.toColumn())})]).\n\t\n\tstart();\n\t}\n\treturn offset;\n\t}},{key:'render',value:function render()\n\t\n\t{\n\tvar tile=this.props.tile;\n\t\n\tvar tileStyles=[\n\tstyles.tile,\n\tstyles['tile'+tile.value],\n\tthis.calculateOffset()];\n\t\n\t\n\tvar textStyles=[\n\tstyles.value,\n\ttile.value>4&&styles.whiteText,\n\ttile.value>100&&styles.threeDigits,\n\ttile.value>1000&&styles.fourDigits];\n\t\n\t\n\treturn(\n\tReact.createElement(Animated.View,{style:tileStyles},\n\tReact.createElement(Text,{style:textStyles},tile.value)));\n\t\n\t\n\t}}]);return Tile;}(React.Component);var\n\t\n\t\n\tGameEndOverlay=function(_React$Component4){_inherits(GameEndOverlay,_React$Component4);function GameEndOverlay(){_classCallCheck(this,GameEndOverlay);return _possibleConstructorReturn(this,(GameEndOverlay.__proto__||Object.getPrototypeOf(GameEndOverlay)).apply(this,arguments));}_createClass(GameEndOverlay,[{key:'render',value:function render()\n\t{\n\tvar board=this.props.board;\n\t\n\tif(!board.hasWon()&&!board.hasLost()){\n\treturn React.createElement(View,null);\n\t}\n\t\n\tvar message=board.hasWon()?\n\t'Good Job!':'Game Over';\n\t\n\treturn(\n\tReact.createElement(View,{style:styles.overlay},\n\tReact.createElement(Text,{style:styles.overlayMessage},message),\n\tReact.createElement(TouchableBounce,{onPress:this.props.onRestart,style:styles.tryAgain},\n\tReact.createElement(Text,{style:styles.tryAgainText},'Try Again?'))));\n\t\n\t\n\t\n\t}}]);return GameEndOverlay;}(React.Component);var\n\t\n\t\n\tGame2048=function(_React$Component5){_inherits(Game2048,_React$Component5);\n\t\n\t\n\t\n\tfunction Game2048(props){_classCallCheck(this,Game2048);var _this5=_possibleConstructorReturn(this,(Game2048.__proto__||Object.getPrototypeOf(Game2048)).call(this,\n\tprops));\n\t_this5.state={\n\tboard:new GameBoard()};\n\t\n\t_this5.startX=0;\n\t_this5.startY=0;return _this5;\n\t}_createClass(Game2048,[{key:'restartGame',value:function restartGame()\n\t\n\t{\n\tthis.setState({board:new GameBoard()});\n\t}},{key:'handleTouchStart',value:function handleTouchStart(\n\t\n\tevent){\n\tif(this.state.board.hasWon()){\n\treturn;\n\t}\n\t\n\tvar touch=getPageXY(event);\n\tthis.startX=touch.pageX;\n\tthis.startY=touch.pageY;\n\t\n\t}},{key:'handleTouchEnd',value:function handleTouchEnd(\n\t\n\tevent){\n\tif(this.state.board.hasWon()){\n\treturn;\n\t}\n\t\n\tvar touch=getPageXY(event);\n\tvar deltaX=touch.pageX-this.startX;\n\tvar deltaY=touch.pageY-this.startY;\n\t\n\tvar direction=-1;\n\tif(Math.abs(deltaX)>3*Math.abs(deltaY)&&Math.abs(deltaX)>30){\n\tdirection=deltaX>0?2:0;\n\t}else if(Math.abs(deltaY)>3*Math.abs(deltaX)&&Math.abs(deltaY)>30){\n\tdirection=deltaY>0?3:1;\n\t}\n\t\n\tif(direction!==-1){\n\tthis.setState({board:this.state.board.move(direction)});\n\t}\n\t}},{key:'render',value:function render()\n\t\n\t{var _this6=this;\n\tvar tiles=this.state.board.tiles.\n\tfilter(function(tile){return tile.value;}).\n\tmap(function(tile){return React.createElement(Tile,{ref:tile.id,key:tile.id,tile:tile});});\n\t\n\treturn(\n\tReact.createElement(View,{\n\tstyle:styles.container,\n\tonTouchStart:function onTouchStart(event){return _this6.handleTouchStart(event);},\n\tonTouchEnd:function onTouchEnd(event){return _this6.handleTouchEnd(event);}},\n\tReact.createElement(Board,null,\n\ttiles),\n\t\n\tReact.createElement(GameEndOverlay,{board:this.state.board,onRestart:function onRestart(){return _this6.restartGame();}})));\n\t\n\t\n\t}}]);return Game2048;}(React.Component);\n\t\n\t\n\tvar styles=StyleSheet.create({\n\tcontainer:{\n\tflex:1,\n\tjustifyContent:'center',\n\talignItems:'center'},\n\t\n\tboard:{\n\tpadding:BOARD_PADDING,\n\tbackgroundColor:'#bbaaaa',\n\tborderRadius:5},\n\t\n\toverlay:{\n\tposition:'absolute',\n\ttop:0,\n\tbottom:0,\n\tleft:0,\n\tright:0,\n\tbackgroundColor:'rgba(221, 221, 221, 0.5)',\n\tflex:1,\n\tflexDirection:'column',\n\tjustifyContent:'center',\n\talignItems:'center'},\n\t\n\toverlayMessage:{\n\tfontSize:40,\n\tmarginBottom:20},\n\t\n\ttryAgain:{\n\tbackgroundColor:'#887766',\n\tpadding:20,\n\tborderRadius:5},\n\t\n\ttryAgainText:{\n\tcolor:'#ffffff',\n\tfontSize:20,\n\tfontWeight:'500'},\n\t\n\tcell:{\n\twidth:CELL_SIZE,\n\theight:CELL_SIZE,\n\tborderRadius:5,\n\tbackgroundColor:'#ddccbb',\n\tmargin:CELL_MARGIN},\n\t\n\trow:{\n\tflexDirection:'row'},\n\t\n\ttile:{\n\tposition:'absolute',\n\twidth:CELL_SIZE,\n\theight:CELL_SIZE,\n\tbackgroundColor:'#ddccbb',\n\tborderRadius:5,\n\tflex:1,\n\tjustifyContent:'center',\n\talignItems:'center'},\n\t\n\tvalue:{\n\tfontSize:24,\n\tcolor:'#776666',\n\tfontFamily:'Verdana',\n\tfontWeight:'500'},\n\t\n\ttile2:{\n\tbackgroundColor:'#eeeeee'},\n\t\n\ttile4:{\n\tbackgroundColor:'#eeeecc'},\n\t\n\ttile8:{\n\tbackgroundColor:'#ffbb88'},\n\t\n\ttile16:{\n\tbackgroundColor:'#ff9966'},\n\t\n\ttile32:{\n\tbackgroundColor:'#ff7755'},\n\t\n\ttile64:{\n\tbackgroundColor:'#ff5533'},\n\t\n\ttile128:{\n\tbackgroundColor:'#eecc77'},\n\t\n\ttile256:{\n\tbackgroundColor:'#eecc66'},\n\t\n\ttile512:{\n\tbackgroundColor:'#eecc55'},\n\t\n\ttile1024:{\n\tbackgroundColor:'#eecc33'},\n\t\n\ttile2048:{\n\tbackgroundColor:'#eecc22'},\n\t\n\twhiteText:{\n\tcolor:'#ffffff'},\n\t\n\tthreeDigits:{\n\tfontSize:20},\n\t\n\tfourDigits:{\n\tfontSize:18}});\n\t\n\t\n\t\n\tAppRegistry.registerComponent('Game2048',function(){return Game2048;});\n\t\n\tif(Platform.OS=='web'){\n\tvar app=document.createElement('div');\n\tdocument.body.appendChild(app);\n\t\n\tAppRegistry.runApplication('Game2048',{\n\trootTag:app});\n\t\n\t}\n\t\n\tmodule.exports=Game2048;\n\n/***/ },\n\n/***/ 445:\n/***/ function(module, exports) {\n\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t'use strict';\n\t\n\t\n\t\n\t\n\tvar rotateLeft=function rotateLeft(matrix){\n\tvar rows=matrix.length;\n\tvar columns=matrix[0].length;\n\tvar res=[];\n\tfor(var row=0;row<rows;++row){\n\tres.push([]);\n\tfor(var column=0;column<columns;++column){\n\tres[row][column]=matrix[column][columns-row-1];\n\t}\n\t}\n\treturn res;\n\t};\n\t\n\tvar Tile=function Tile(value,row,column){\n\tthis.value=value||0;\n\tthis.row=row||-1;\n\t\n\tthis.column=column||-1;\n\tthis.oldRow=-1;\n\tthis.oldColumn=-1;\n\tthis.markForDeletion=false;\n\tthis.mergedInto=null;\n\tthis.id=Tile.id++;\n\t};\n\t\n\tTile.id=0;\n\t\n\tTile.prototype.moveTo=function(row,column){\n\tthis.oldRow=this.row;\n\tthis.oldColumn=this.column;\n\tthis.row=row;\n\tthis.column=column;\n\t};\n\t\n\tTile.prototype.isNew=function(){\n\treturn this.oldRow===-1&&!this.mergedInto;\n\t};\n\t\n\tTile.prototype.hasMoved=function(){\n\treturn this.fromRow()!==-1&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||\n\tthis.mergedInto;\n\t};\n\t\n\tTile.prototype.fromRow=function(){\n\treturn this.mergedInto?this.row:this.oldRow;\n\t};\n\t\n\tTile.prototype.fromColumn=function(){\n\treturn this.mergedInto?this.column:this.oldColumn;\n\t};\n\t\n\tTile.prototype.toRow=function(){\n\treturn this.mergedInto?this.mergedInto.row:this.row;\n\t};\n\t\n\tTile.prototype.toColumn=function(){\n\treturn this.mergedInto?this.mergedInto.column:this.column;\n\t};\n\t\n\tvar Board=function Board(){\n\tthis.tiles=[];\n\tthis.cells=[];\n\tfor(var i=0;i<Board.size;++i){\n\tthis.cells[i]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];\n\t}\n\tthis.addRandomTile();\n\tthis.setPositions();\n\tthis.won=false;\n\t};\n\t\n\tBoard.prototype.addTile=function(){\n\tvar res=new Tile();\n\tTile.apply(res,arguments);\n\tthis.tiles.push(res);\n\treturn res;\n\t};\n\t\n\tBoard.size=4;\n\t\n\tBoard.prototype.moveLeft=function(){\n\tvar hasChanged=false;\n\tfor(var row=0;row<Board.size;++row){\n\tvar currentRow=this.cells[row].filter(function(tile){return tile.value!==0;});\n\tvar resultRow=[];\n\tfor(var target=0;target<Board.size;++target){\n\tvar targetTile=currentRow.length?currentRow.shift():this.addTile();\n\tif(currentRow.length>0&&currentRow[0].value===targetTile.value){\n\tvar tile1=targetTile;\n\ttargetTile=this.addTile(targetTile.value);\n\ttile1.mergedInto=targetTile;\n\tvar tile2=currentRow.shift();\n\ttile2.mergedInto=targetTile;\n\ttargetTile.value+=tile2.value;\n\t}\n\tresultRow[target]=targetTile;\n\tthis.won=this.won||targetTile.value===2048;\n\thasChanged=hasChanged||targetTile.value!==this.cells[row][target].value;\n\t}\n\tthis.cells[row]=resultRow;\n\t}\n\treturn hasChanged;\n\t};\n\t\n\tBoard.prototype.setPositions=function(){\n\tthis.cells.forEach(function(row,rowIndex){\n\trow.forEach(function(tile,columnIndex){\n\ttile.oldRow=tile.row;\n\ttile.oldColumn=tile.column;\n\ttile.row=rowIndex;\n\ttile.column=columnIndex;\n\ttile.markForDeletion=false;\n\t});\n\t});\n\t};\n\t\n\tBoard.fourProbability=0.1;\n\t\n\tBoard.prototype.addRandomTile=function(){\n\tvar emptyCells=[];\n\tfor(var r=0;r<Board.size;++r){\n\tfor(var c=0;c<Board.size;++c){\n\tif(this.cells[r][c].value===0){\n\temptyCells.push({r:r,c:c});\n\t}\n\t}\n\t}\n\tvar index=Math.floor(Math.random()*emptyCells.length);\n\tvar cell=emptyCells[index];\n\tvar newValue=Math.random()<Board.fourProbability?4:2;\n\tthis.cells[cell.r][cell.c]=this.addTile(newValue);\n\t};\n\t\n\tBoard.prototype.move=function(direction){\n\t\n\tthis.clearOldTiles();\n\tfor(var i=0;i<direction;++i){\n\tthis.cells=rotateLeft(this.cells);\n\t}\n\tvar hasChanged=this.moveLeft();\n\tfor(var i=direction;i<4;++i){\n\tthis.cells=rotateLeft(this.cells);\n\t}\n\tif(hasChanged){\n\tthis.addRandomTile();\n\t}\n\tthis.setPositions();\n\treturn this;\n\t};\n\t\n\tBoard.prototype.clearOldTiles=function(){\n\tthis.tiles=this.tiles.filter(function(tile){return tile.markForDeletion===false;});\n\tthis.tiles.forEach(function(tile){tile.markForDeletion=true;});\n\t};\n\t\n\tBoard.prototype.hasWon=function(){\n\treturn this.won;\n\t};\n\t\n\tBoard.deltaX=[-1,0,1,0];\n\tBoard.deltaY=[0,-1,0,1];\n\t\n\tBoard.prototype.hasLost=function(){\n\tvar canMove=false;\n\tfor(var row=0;row<Board.size;++row){\n\tfor(var column=0;column<Board.size;++column){\n\tcanMove=canMove||this.cells[row][column].value===0;\n\tfor(var dir=0;dir<4;++dir){\n\tvar newRow=row+Board.deltaX[dir];\n\tvar newColumn=column+Board.deltaY[dir];\n\tif(newRow<0||newRow>=Board.size||newColumn<0||newColumn>=Board.size){\n\tcontinue;\n\t}\n\tcanMove=canMove||this.cells[row][column].value===this.cells[newRow][newColumn].value;\n\t}\n\t}\n\t}\n\treturn!canMove;\n\t};\n\t\n\tmodule.exports=Board;\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** game2048.js\n **/","/**\n * The examples provided by Facebook are for non-commercial testing and\n * evaluation purposes only.\n *\n * Facebook reserves all rights not expressly granted.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL\n * FACEBOOK BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * @providesModule Game2048\n * @flow\n */\n'use strict';\n\nvar React = require('react-native');\nvar {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View,\n  Platform,\n  Animated,\n  TouchableBounce,\n} = React;\n\nfunction getPageXY(event){\n  if (Platform.OS == 'web') {\n    var touch = event.nativeEvent.changedTouches[0];\n    return {\n      pageX: touch.pageX,\n      pageY: touch.pageY\n    }\n  } else {\n    return {\n      pageX: event.nativeEvent.pageX,\n      pageY: event.nativeEvent.pageY\n    }\n  }\n}\n\nvar GameBoard = require('GameBoard');\n\nvar BOARD_PADDING = 3;\nvar CELL_MARGIN = 4;\nvar CELL_SIZE = 60;\n\nclass Cell extends React.Component {\n  render() {\n    return <View style={styles.cell} />;\n  }\n}\n\nclass Board extends React.Component {\n  render() {\n    return (\n      <View style={styles.board}>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        {this.props.children}\n      </View>\n    );\n  }\n}\n\nclass Tile extends React.Component {\n  static _getPosition(index): number {\n    return BOARD_PADDING + (index * (CELL_SIZE + CELL_MARGIN * 2) + CELL_MARGIN);\n  }\n\n  constructor(props: {}) {\n    super(props);\n\n    var tile = this.props.tile;\n\n    this.state = {\n      opacity: new Animated.Value(0),\n      top: new Animated.Value(Tile._getPosition(tile.toRow())),\n      left: new Animated.Value(Tile._getPosition(tile.toColumn())),\n    };\n  }\n\n  calculateOffset(): {top: number; left: number; opacity: number} {\n    var tile = this.props.tile;\n\n    var offset = {\n      top: this.state.top,\n      left: this.state.left,\n      opacity: this.state.opacity,\n    };\n\n    if (tile.isNew()) {\n      Animated.timing(this.state.opacity, {\n        duration: 100,\n        toValue: 1,\n      }).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(offset.top, {\n          duration: 100,\n          toValue: Tile._getPosition(tile.toRow()),\n        }),\n        Animated.timing(offset.left, {\n          duration: 100,\n          toValue: Tile._getPosition(tile.toColumn()),\n        }),\n      ]).start();\n    }\n    return offset;\n  }\n\n  render() {\n    var tile = this.props.tile;\n\n    var tileStyles = [\n      styles.tile,\n      styles['tile' + tile.value],\n      this.calculateOffset(),\n    ];\n\n    var textStyles = [\n      styles.value,\n      tile.value > 4 && styles.whiteText,\n      tile.value > 100 && styles.threeDigits,\n      tile.value > 1000 && styles.fourDigits,\n    ];\n\n    return (\n      <Animated.View style={tileStyles}>\n        <Text style={textStyles}>{tile.value}</Text>\n      </Animated.View>\n    );\n  }\n}\n\nclass GameEndOverlay extends React.Component {\n  render() {\n    var board = this.props.board;\n\n    if (!board.hasWon() && !board.hasLost()) {\n      return <View/>;\n    }\n\n    var message = board.hasWon() ?\n      'Good Job!' : 'Game Over';\n\n    return (\n      <View style={styles.overlay}>\n        <Text style={styles.overlayMessage}>{message}</Text>\n        <TouchableBounce onPress={this.props.onRestart} style={styles.tryAgain}>\n          <Text style={styles.tryAgainText}>Try Again?</Text>\n        </TouchableBounce>\n      </View>\n    );\n  }\n}\n\nclass Game2048 extends React.Component {\n  startX: number;\n  startY: number;\n\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      board: new GameBoard(),\n    };\n    this.startX = 0;\n    this.startY = 0;\n  }\n\n  restartGame() {\n    this.setState({board: new GameBoard()});\n  }\n\n  handleTouchStart(event: Object) {\n    if (this.state.board.hasWon()) {\n      return;\n    }\n\n    var touch = getPageXY(event);\n    this.startX = touch.pageX;\n    this.startY = touch.pageY;\n\n  }\n\n  handleTouchEnd(event: Object) {\n    if (this.state.board.hasWon()) {\n      return;\n    }\n\n    var touch = getPageXY(event);\n    var deltaX = touch.pageX - this.startX;\n    var deltaY = touch.pageY - this.startY;\n\n    var direction = -1;\n    if (Math.abs(deltaX) > 3 * Math.abs(deltaY) && Math.abs(deltaX) > 30) {\n      direction = deltaX > 0 ? 2 : 0;\n    } else if (Math.abs(deltaY) > 3 * Math.abs(deltaX) && Math.abs(deltaY) > 30) {\n      direction = deltaY > 0 ? 3 : 1;\n    }\n\n    if (direction !== -1) {\n      this.setState({board: this.state.board.move(direction)});\n    }\n  }\n\n  render() {\n    var tiles = this.state.board.tiles\n      .filter((tile) => tile.value)\n      .map((tile) => <Tile ref={tile.id} key={tile.id} tile={tile} />);\n\n    return (\n      <View\n        style={styles.container}\n        onTouchStart={(event) => this.handleTouchStart(event)}\n        onTouchEnd={(event) => this.handleTouchEnd(event)}>\n        <Board>\n          {tiles}\n        </Board>\n        <GameEndOverlay board={this.state.board} onRestart={() => this.restartGame()} />\n      </View>\n    );\n  }\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  board: {\n    padding: BOARD_PADDING,\n    backgroundColor: '#bbaaaa',\n    borderRadius: 5,\n  },\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: 'rgba(221, 221, 221, 0.5)',\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  overlayMessage: {\n    fontSize: 40,\n    marginBottom: 20,\n  },\n  tryAgain: {\n    backgroundColor: '#887766',\n    padding: 20,\n    borderRadius: 5,\n  },\n  tryAgainText: {\n    color: '#ffffff',\n    fontSize: 20,\n    fontWeight: '500',\n  },\n  cell: {\n    width: CELL_SIZE,\n    height: CELL_SIZE,\n    borderRadius: 5,\n    backgroundColor: '#ddccbb',\n    margin: CELL_MARGIN,\n  },\n  row: {\n    flexDirection: 'row',\n  },\n  tile: {\n    position: 'absolute',\n    width: CELL_SIZE,\n    height: CELL_SIZE,\n    backgroundColor: '#ddccbb',\n    borderRadius: 5,\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  value: {\n    fontSize: 24,\n    color: '#776666',\n    fontFamily: 'Verdana',\n    fontWeight: '500',\n  },\n  tile2: {\n    backgroundColor: '#eeeeee',\n  },\n  tile4: {\n    backgroundColor: '#eeeecc',\n  },\n  tile8: {\n    backgroundColor: '#ffbb88',\n  },\n  tile16: {\n    backgroundColor: '#ff9966',\n  },\n  tile32: {\n    backgroundColor: '#ff7755',\n  },\n  tile64: {\n    backgroundColor: '#ff5533',\n  },\n  tile128: {\n    backgroundColor: '#eecc77',\n  },\n  tile256: {\n    backgroundColor: '#eecc66',\n  },\n  tile512: {\n    backgroundColor: '#eecc55',\n  },\n  tile1024: {\n    backgroundColor: '#eecc33',\n  },\n  tile2048: {\n    backgroundColor: '#eecc22',\n  },\n  whiteText: {\n    color: '#ffffff',\n  },\n  threeDigits: {\n    fontSize: 20,\n  },\n  fourDigits: {\n    fontSize: 18,\n  },\n});\n\nAppRegistry.registerComponent('Game2048', () => Game2048);\n\nif(Platform.OS == 'web'){\n  var app = document.createElement('div');\n  document.body.appendChild(app);\n\n  AppRegistry.runApplication('Game2048', {\n    rootTag: app\n  })\n}\n\nmodule.exports = Game2048;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Examples/2048/Game2048.js\n **/","/**\n * The examples provided by Facebook are for non-commercial testing and\n * evaluation purposes only.\n *\n * Facebook reserves all rights not expressly granted.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL\n * FACEBOOK BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * @providesModule GameBoard\n * @flow\n */\n'use strict';\n\n// NB: Taken straight from: https://github.com/IvanVergiliev/2048-react/blob/master/src/board.js\n//     with no modificiation except to format it for CommonJS and fix lint/flow errors\n\nvar rotateLeft = function (matrix) {\n  var rows = matrix.length;\n  var columns = matrix[0].length;\n  var res = [];\n  for (var row = 0; row < rows; ++row) {\n    res.push([]);\n    for (var column = 0; column < columns; ++column) {\n      res[row][column] = matrix[column][columns - row - 1];\n    }\n  }\n  return res;\n};\n\nvar Tile = function (value?: number, row?: number, column?: number) {\n  this.value = value || 0;\n  this.row = row || -1;\n\n  this.column = column || -1;\n  this.oldRow = -1;\n  this.oldColumn = -1;\n  this.markForDeletion = false;\n  this.mergedInto = null;\n  this.id = Tile.id++;\n};\n\nTile.id = 0;\n\nTile.prototype.moveTo = function (row, column) {\n  this.oldRow = this.row;\n  this.oldColumn = this.column;\n  this.row = row;\n  this.column = column;\n};\n\nTile.prototype.isNew = function () {\n  return this.oldRow === -1 && !this.mergedInto;\n};\n\nTile.prototype.hasMoved = function () {\n  return (this.fromRow() !== -1 && (this.fromRow() !== this.toRow() || this.fromColumn() !== this.toColumn())) ||\n    this.mergedInto;\n};\n\nTile.prototype.fromRow = function () {\n  return this.mergedInto ? this.row : this.oldRow;\n};\n\nTile.prototype.fromColumn = function () {\n  return this.mergedInto ? this.column : this.oldColumn;\n};\n\nTile.prototype.toRow = function () {\n  return this.mergedInto ? this.mergedInto.row : this.row;\n};\n\nTile.prototype.toColumn = function () {\n  return this.mergedInto ? this.mergedInto.column : this.column;\n};\n\nvar Board = function () {\n  this.tiles = [];\n  this.cells = [];\n  for (var i = 0; i < Board.size; ++i) {\n    this.cells[i] = [this.addTile(), this.addTile(), this.addTile(), this.addTile()];\n  }\n  this.addRandomTile();\n  this.setPositions();\n  this.won = false;\n};\n\nBoard.prototype.addTile = function () {\n  var res = new Tile();\n  Tile.apply(res, arguments);\n  this.tiles.push(res);\n  return res;\n};\n\nBoard.size = 4;\n\nBoard.prototype.moveLeft = function () {\n  var hasChanged = false;\n  for (var row = 0; row < Board.size; ++row) {\n    var currentRow = this.cells[row].filter(function (tile) { return tile.value !== 0; });\n    var resultRow = [];\n    for (var target = 0; target < Board.size; ++target) {\n      var targetTile = currentRow.length ? currentRow.shift() : this.addTile();\n      if (currentRow.length > 0 && currentRow[0].value === targetTile.value) {\n        var tile1 = targetTile;\n        targetTile = this.addTile(targetTile.value);\n        tile1.mergedInto = targetTile;\n        var tile2 = currentRow.shift();\n        tile2.mergedInto = targetTile;\n        targetTile.value += tile2.value;\n      }\n      resultRow[target] = targetTile;\n      this.won = this.won || (targetTile.value === 2048);\n      hasChanged = hasChanged || (targetTile.value !== this.cells[row][target].value);\n    }\n    this.cells[row] = resultRow;\n  }\n  return hasChanged;\n};\n\nBoard.prototype.setPositions = function () {\n  this.cells.forEach(function (row, rowIndex) {\n    row.forEach(function (tile, columnIndex) {\n      tile.oldRow = tile.row;\n      tile.oldColumn = tile.column;\n      tile.row = rowIndex;\n      tile.column = columnIndex;\n      tile.markForDeletion = false;\n    });\n  });\n};\n\nBoard.fourProbability = 0.1;\n\nBoard.prototype.addRandomTile = function () {\n  var emptyCells = [];\n  for (var r = 0; r < Board.size; ++r) {\n    for (var c = 0; c < Board.size; ++c) {\n      if (this.cells[r][c].value === 0) {\n        emptyCells.push({r: r, c: c});\n      }\n    }\n  }\n  var index = Math.floor(Math.random() * emptyCells.length);\n  var cell = emptyCells[index];\n  var newValue = Math.random() < Board.fourProbability ? 4 : 2;\n  this.cells[cell.r][cell.c] = this.addTile(newValue);\n};\n\nBoard.prototype.move = function (direction) {\n  // 0 -> left, 1 -> up, 2 -> right, 3 -> down\n  this.clearOldTiles();\n  for (var i = 0; i < direction; ++i) {\n    this.cells = rotateLeft(this.cells);\n  }\n  var hasChanged = this.moveLeft();\n  for (var i = direction; i < 4; ++i) {\n    this.cells = rotateLeft(this.cells);\n  }\n  if (hasChanged) {\n    this.addRandomTile();\n  }\n  this.setPositions();\n  return this;\n};\n\nBoard.prototype.clearOldTiles = function () {\n  this.tiles = this.tiles.filter(function (tile) { return tile.markForDeletion === false; });\n  this.tiles.forEach(function (tile) { tile.markForDeletion = true; });\n};\n\nBoard.prototype.hasWon = function () {\n  return this.won;\n};\n\nBoard.deltaX = [-1, 0, 1, 0];\nBoard.deltaY = [0, -1, 0, 1];\n\nBoard.prototype.hasLost = function () {\n  var canMove = false;\n  for (var row = 0; row < Board.size; ++row) {\n    for (var column = 0; column < Board.size; ++column) {\n      canMove = canMove || (this.cells[row][column].value === 0);\n      for (var dir = 0; dir < 4; ++dir) {\n        var newRow = row + Board.deltaX[dir];\n        var newColumn = column + Board.deltaY[dir];\n        if (newRow < 0 || newRow >= Board.size || newColumn < 0 || newColumn >= Board.size) {\n          continue;\n        }\n        canMove = canMove || (this.cells[row][column].value === this.cells[newRow][newColumn].value);\n      }\n    }\n  }\n  return !canMove;\n};\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Examples/2048/GameBoard.js\n **/"],"sourceRoot":""}